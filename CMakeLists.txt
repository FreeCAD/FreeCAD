cmake_minimum_required(VERSION 3.16)

project(OndselSolver VERSION 1.0.1 DESCRIPTION "Assembly Constraints and Multibody Dynamics code")

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED True)

set(ONDSEL_EXPORT
        MbDCode/Abs.cpp
        MbDCode/AbsConstraint.cpp
        MbDCode/AccICKineNewtonRaphson.cpp
        MbDCode/AccICNewtonRaphson.cpp
        MbDCode/AccKineNewtonRaphson.cpp
        MbDCode/AccNewtonRaphson.cpp
        MbDCode/AngleJoint.cpp
        MbDCode/AngleZIecJec.cpp
        MbDCode/AngleZIeqcJec.cpp
        MbDCode/AngleZIeqcJeqc.cpp
        MbDCode/AnyGeneralSpline.cpp
        MbDCode/AnyPosICNewtonRaphson.cpp
        MbDCode/ArcTan.cpp
        MbDCode/ArcTan2.cpp
        MbDCode/Array.cpp
        MbDCode/ASMTAnimationParameters.cpp
        MbDCode/ASMTAssembly.cpp
        MbDCode/ASMTConstantGravity.cpp
        MbDCode/ASMTConstraintSet.cpp
        MbDCode/ASMTCylindricalJoint.cpp
        MbDCode/ASMTExtrusion.cpp
        MbDCode/ASMTFixedJoint.cpp
        MbDCode/ASMTForceTorque.cpp
        MbDCode/ASMTGeneralMotion.cpp
        MbDCode/ASMTItem.cpp
        MbDCode/ASMTItemIJ.cpp
        MbDCode/ASMTJoint.cpp
        MbDCode/ASMTKinematicIJ.cpp
        MbDCode/ASMTMarker.cpp
        MbDCode/ASMTMotion.cpp
        MbDCode/ASMTPart.cpp
        MbDCode/ASMTPointInPlaneJoint.cpp
        MbDCode/ASMTPrincipalMassMarker.cpp
        MbDCode/ASMTRefCurve.cpp
        MbDCode/ASMTRefItem.cpp
        MbDCode/ASMTRefPoint.cpp
        MbDCode/ASMTRefSurface.cpp
        MbDCode/ASMTRevoluteJoint.cpp
        MbDCode/ASMTRotationalMotion.cpp
        MbDCode/ASMTSimulationParameters.cpp
        MbDCode/ASMTSpatialContainer.cpp
        MbDCode/ASMTSpatialItem.cpp
        MbDCode/ASMTSphericalJoint.cpp
        MbDCode/ASMTTime.cpp
        MbDCode/ASMTTranslationalMotion.cpp
        MbDCode/ASMTTranslationalJoint.cpp
        MbDCode/ASMTUniversalJoint.cpp
        MbDCode/AtPointConstraintIJ.cpp
        MbDCode/AtPointConstraintIqcJc.cpp
        MbDCode/AtPointConstraintIqcJqc.cpp
        MbDCode/AtPointConstraintIqctJqc.cpp
        MbDCode/AtPointJoint.cpp
        MbDCode/BasicIntegrator.cpp
        MbDCode/BasicQuasiIntegrator.cpp
        MbDCode/BasicUserFunction.cpp
        MbDCode/CADSystem.cpp
        MbDCode/CartesianFrame.cpp
        MbDCode/CompoundJoint.cpp
        MbDCode/Constant.cpp
        MbDCode/ConstantGravity.cpp
        MbDCode/ConstantVelocityJoint.cpp
        MbDCode/Constraint.cpp
        MbDCode/ConstraintIJ.cpp
        MbDCode/ConstVelConstraintIJ.cpp
        MbDCode/ConstVelConstraintIqcJc.cpp
        MbDCode/ConstVelConstraintIqcJqc.cpp
        MbDCode/Cosine.cpp
        MbDCode/CREATE.cpp
        MbDCode/CylindricalJoint.cpp
        MbDCode/CylSphJoint.cpp
        MbDCode/DifferentiatedGeneralSpline.cpp
        MbDCode/EndFrameqct2.cpp
        MbDCode/EulerAngles.cpp
        MbDCode/EulerAnglesDDot.cpp
        MbDCode/EulerAnglesDot.cpp
        MbDCode/Exponential.cpp
        MbDCode/ExternalSystem.cpp
        MbDCode/FunctionFromData.cpp
        MbDCode/FunctionXcParameter.cpp
        MbDCode/FunctionXY.cpp
        MbDCode/GeneralSpline.cpp
        MbDCode/Ln.cpp
        MbDCode/Log10.cpp
        MbDCode/LogN.cpp
        MbDCode/Negative.cpp
        MbDCode/PosVelAccData.cpp
        MbDCode/DiagonalMatrix.cpp
        MbDCode/DifferenceOperator.cpp
        MbDCode/DirectionCosineConstraintIJ.cpp
        MbDCode/DirectionCosineConstraintIqcJc.cpp
        MbDCode/DirectionCosineConstraintIqcJqc.cpp
        MbDCode/DirectionCosineConstraintIqctJqc.cpp
        MbDCode/DirectionCosineIecJec.cpp
        MbDCode/DirectionCosineIeqcJec.cpp
        MbDCode/DirectionCosineIeqcJeqc.cpp
        MbDCode/DirectionCosineIeqctJeqc.cpp
        MbDCode/DiscontinuityError.cpp
        MbDCode/DispCompIecJecIe.cpp
        MbDCode/DispCompIecJecKec.cpp
        MbDCode/DispCompIecJecKeqc.cpp
        MbDCode/DispCompIecJecO.cpp
        MbDCode/DispCompIeqcJecIe.cpp
        MbDCode/DispCompIeqcJecKeqc.cpp
        MbDCode/DispCompIeqcJecO.cpp
        MbDCode/DispCompIeqcJeqcIe.cpp
        MbDCode/DispCompIeqcJeqcKeqc.cpp
        MbDCode/DispCompIeqcJeqcKeqct.cpp
        MbDCode/DispCompIeqcJeqcO.cpp
        MbDCode/DispCompIeqctJeqcIe.cpp
        MbDCode/DispCompIeqctJeqcKeqct.cpp
        MbDCode/DispCompIeqctJeqcO.cpp
        MbDCode/DistanceConstraintIJ.cpp
        MbDCode/DistanceConstraintIqcJc.cpp
        MbDCode/DistanceConstraintIqcJqc.cpp
        MbDCode/DistanceConstraintIqctJqc.cpp
        MbDCode/DistancexyConstraintIJ.cpp
        MbDCode/DistancexyConstraintIqcJc.cpp
        MbDCode/DistancexyConstraintIqcJqc.cpp
        MbDCode/DistIecJec.cpp
        MbDCode/DistIeqcJec.cpp
        MbDCode/DistIeqcJeqc.cpp
        MbDCode/DistIeqctJeqc.cpp
        MbDCode/DistxyIecJec.cpp
        MbDCode/DistxyIeqcJec.cpp
        MbDCode/DistxyIeqcJeqc.cpp
        MbDCode/DistxyIeqctJeqc.cpp
        MbDCode/EndFramec.cpp
        MbDCode/EndFrameqc.cpp
        MbDCode/EndFrameqct.cpp
        MbDCode/EulerAngleszxz.cpp
        MbDCode/EulerAngleszxzDDot.cpp
        MbDCode/EulerAngleszxzDot.cpp
        MbDCode/EulerArray.cpp
        MbDCode/EulerConstraint.cpp
        MbDCode/EulerParameters.cpp
        MbDCode/EulerParametersDDot.cpp
        MbDCode/EulerParametersDot.cpp
        MbDCode/ExpressionX.cpp
        MbDCode/FixedJoint.cpp
        MbDCode/ForceTorqueData.cpp
        MbDCode/ForceTorqueItem.cpp
        MbDCode/FullColumn.cpp
        MbDCode/FullMatrix.cpp
        MbDCode/FullMotion.cpp
        MbDCode/FullRow.cpp
        MbDCode/Function.cpp
        MbDCode/FunctionWithManyArgs.cpp
        MbDCode/FunctionX.cpp
        MbDCode/GearConstraintIJ.cpp
        MbDCode/GearConstraintIqcJc.cpp
        MbDCode/GearConstraintIqcJqc.cpp
        MbDCode/GearJoint.cpp
        MbDCode/GEFullMat.cpp
        MbDCode/GEFullMatFullPv.cpp
        MbDCode/GEFullMatParPv.cpp
        MbDCode/GESpMat.cpp
        MbDCode/GESpMatFullPv.cpp
        MbDCode/GESpMatFullPvPosIC.cpp
        MbDCode/GESpMatParPv.cpp
        MbDCode/GESpMatParPvMarko.cpp
        MbDCode/GESpMatParPvMarkoFast.cpp
        MbDCode/GESpMatParPvPrecise.cpp
        MbDCode/ICKineIntegrator.cpp
        MbDCode/IndependentVariable.cpp
        MbDCode/InLineJoint.cpp
        MbDCode/InPlaneJoint.cpp
        MbDCode/Integrator.cpp
        MbDCode/IntegratorInterface.cpp
        MbDCode/Item.cpp
        MbDCode/Joint.cpp
        MbDCode/KineIntegrator.cpp
        MbDCode/KinematicIeJe.cpp
        MbDCode/LDUFullMatParPv.cpp
        MbDCode/LDUSpMat.cpp
        MbDCode/LDUSpMatParPv.cpp
        MbDCode/LDUSpMatParPvMarko.cpp
        MbDCode/LDUSpMatParPvPrecise.cpp
        MbDCode/LinearMultiStepMethod.cpp
        MbDCode/LineInPlaneJoint.cpp
        MbDCode/MarkerFrame.cpp
        MbDCode/Math.cpp
        MbDCode/MatrixDecomposition.cpp
        MbDCode/MatrixGaussElimination.cpp
        MbDCode/MatrixLDU.cpp
        MbDCode/MatrixSolver.cpp
        MbDCode/MaximumIterationError.cpp
        MbDCode/NewtonRaphson.cpp
        MbDCode/NewtonRaphsonError.cpp
        MbDCode/NoRotationJoint.cpp
        MbDCode/NotKinematicError.cpp
        MbDCode/Numeric.cpp
        MbDCode/OrbitAnglezIecJec.cpp
        MbDCode/OrbitAnglezIeqcJec.cpp
        MbDCode/OrbitAnglezIeqcJeqc.cpp
        MbDCode/Orientation.cpp
        MbDCode/ParallelAxesJoint.cpp
        MbDCode/Part.cpp
        MbDCode/PartFrame.cpp
        MbDCode/PerpendicularJoint.cpp
        MbDCode/PlanarJoint.cpp
        MbDCode/PointInLineJoint.cpp
        MbDCode/PointInPlaneJoint.cpp
        MbDCode/PosICKineNewtonRaphson.cpp
        MbDCode/PosICNewtonRaphson.cpp
        MbDCode/PosKineNewtonRaphson.cpp
        MbDCode/PosNewtonRaphson.cpp
        MbDCode/Power.cpp
        MbDCode/PrescribedMotion.cpp
        MbDCode/Product.cpp
        MbDCode/QuasiIntegrator.cpp
        MbDCode/RackPinConstraintIJ.cpp
        MbDCode/RackPinConstraintIqcJc.cpp
        MbDCode/RackPinConstraintIqcJqc.cpp
        MbDCode/RackPinJoint.cpp
        MbDCode/Reciprocal.cpp
        MbDCode/RedundantConstraint.cpp
        MbDCode/RevCylJoint.cpp
        MbDCode/RevoluteJoint.cpp
        MbDCode/RowTypeMatrix.cpp
        MbDCode/ScalarNewtonRaphson.cpp
        MbDCode/ScrewConstraintIJ.cpp
        MbDCode/ScrewConstraintIqcJc.cpp
        MbDCode/ScrewConstraintIqcJqc.cpp
        MbDCode/ScrewJoint.cpp
        MbDCode/SimulationStoppingError.cpp
        MbDCode/Sine.cpp
        MbDCode/SingularMatrixError.cpp
        MbDCode/Solver.cpp
        MbDCode/SparseColumn.cpp
        MbDCode/SparseMatrix.cpp
        MbDCode/SparseRow.cpp
        MbDCode/SparseVector.cpp
        MbDCode/SphericalJoint.cpp
        MbDCode/SphSphJoint.cpp
        MbDCode/StableBackwardDifference.cpp
        MbDCode/LDUFullMat.cpp
        MbDCode/StateData.cpp
        MbDCode/Sum.cpp
        MbDCode/Symbolic.cpp
        MbDCode/SymbolicParser.cpp
        MbDCode/SyntaxError.cpp
        MbDCode/System.cpp
        MbDCode/SystemNewtonRaphson.cpp
        MbDCode/SystemSolver.cpp
        MbDCode/Time.cpp
        MbDCode/TooManyTriesError.cpp
        MbDCode/TooSmallStepSizeError.cpp
        MbDCode/Translation.cpp
        MbDCode/TranslationalJoint.cpp
        MbDCode/TranslationConstraintIJ.cpp
        MbDCode/TranslationConstraintIqcJc.cpp
        MbDCode/TranslationConstraintIqcJqc.cpp
        MbDCode/TranslationConstraintIqctJqc.cpp
        MbDCode/Units.cpp
        MbDCode/UniversalJoint.cpp
        MbDCode/UserFunction.cpp
        MbDCode/Variable.cpp
        MbDCode/FullVector.cpp
        MbDCode/VectorNewtonRaphson.cpp
        MbDCode/VelICKineSolver.cpp
        MbDCode/VelICSolver.cpp
        MbDCode/VelKineSolver.cpp
        MbDCode/VelSolver.cpp
        MbDCode/ZRotation.cpp
        MbDCode/ZTranslation.cpp
        MbDCode/ASMTAssembly.cpp
)

add_executable(ondsel-solver MbDCode/MbDCode.cpp)

add_library(OndselSolver
        STATIC ${ONDSEL_EXPORT}
)

add_subdirectory(MbDCode)

set_target_properties(OndselSolver
        PROPERTIES VERSION ${PROJECT_VERSION}
        SOVERSION 1
)

configure_file(OndselSolver.pc.in OndselSolver.pc @ONLY)
install(TARGETS OndselSolver
        LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
        PUBLIC_HEADER DESTINATION ${CMAKE_INSTALL_INCLUDEDIR})
install(FILES ${CMAKE_BINARY_DIR}/OndselSolver.pc
        DESTINATION ${CMAKE_INSTALL_DATAROOTDIR}/pkgconfig)
