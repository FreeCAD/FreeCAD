# ADR-003: Safe height and Clearance height in operations

## Status
Legacy / DRAFT

## Context
Each operation is relatively atomic in the context of a job.
The final sequence of job gcode depends on the fixtures selected and the ordering of operations within those fixtures.
Consequently, we need some basic assumptions about where the tool will be located at the beginning and the end of an operation in order to avoid collisions.

## Decision
The operation is responsible for acting on all of the target geometry selected.  For example, a pocket operation may specify multiple faces to be cleared.  It is the responsibility of the operation to move the cutter into each area, clear it, retract and move to the next.

- A RAPID move in Z+ direction _SHALL_ be assumed safe.
- A safe height plane _SHALL_ be defined at the Job level.  This plane _SHALL_ be assumed to be safe for RAPID moves laterally to any position at any time with the loaded tool.
- Operations _SHALL_ assume that the tool starts at the job safe height plane.
- All operations SHALL implement a local safe height plane. This plane _SHALL_ be assumed to be safe for lateral RAPID moves between different targets within the same operation.
- It _SHALL_ be an error for the operation safe height plane to be higher than the job safe height plane.
- Within an operation A RAPID move from the job safe plane to the operation safe plane _SHALL_ be assumed safe.
- Operations _MAY_ define other planes and use them within the context of the operation.
- The operation _SHALL_ end with a RAPID move to the ClearanceHeight.
## Consequences

### Advantages
- consistent behavior within and between operations

### Disadvantages
- Moves to clearance height between operations may not be as efficient as possible.
- Final refinement including removal of redundant commands should be left to the postprocessor.
