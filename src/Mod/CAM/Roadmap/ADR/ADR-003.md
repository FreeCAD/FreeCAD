
# ADR-003: Improving inadequate  FeedRate "F" calculation.


## Status
Legacy

## Context

FeedRate.py attempts to assign "F" parameters by sniffing some attributes of the path and guessing what feed rate
 should be applied. 
This is currently very naive and basically does isVertical() binary test to chose between Vfeed and Hfeed from the TC. 
This test is computationally quite heavy for what it does and only provides a satisfactory result on straight line
 XY or Z moves.

Arcs need a radial correction which needs more data about the tool size and arc radius. 
Straight cuts other than in XY plane need more complex mitigation of feed rate.
Helical arcs need yet more info about the path not available in post hoc sniffing. 


https://github.com/FreeCAD/FreeCAD/pull/22794 proposed adding radial adjustment to  feed rates for G2,G3 specifically in
 helix and threadmilling ops.

This was done by adding pseudo-parameters to pass the necessary supplementary data needed to calcuate this in FeedRate.py 
in keeping with the current paradigm of post hoc sniffing of the path context to set the required "F" parameter. 

The natural place to do this is in the "generator" function where this info is available and the rest of the command
is constructed.

There are different ways this could be done. 

1. Directly in generator : leading to duplication in different ops
2. Helper functions called from generator
3. Add extra data somewhere else in the Path.Command object. Though this does need to be specific to each individual command.
4. Use pseudo-params as in above PR. 


## Decision
None

## Consequences

Advantages

Disadvantages
